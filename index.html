<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Future Architect | Rators Club</title>
    
    <link rel="icon" href="https://drive.google.com/thumbnail?id=1bOFY9XiVAv-WRQnVHXSnL5FHVEoK3UAp&sz=w128" type="image/png">
    
    <link href="https://fonts.googleapis.com/css2?family=Lora:ital,wght@0,400;0,600;0,700;1,400&family=Nunito+Sans:wght@300;400;600;700;800&family=JetBrains+Mono:wght@500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>

    <style>
        /* ========================================
           DESIGN SYSTEM: FUTURE TITAN (Neon Cyan)
           ======================================== */
        :root {
            /* Core Palette */
            --bg-page: #f8fafc;
            --bg-card: #ffffff;
            --bg-element: #f1f5f9;
            --text-primary: #0f172a;
            --text-secondary: #475569;
            --border-line: #e2e8f0;

            /* Functional Colors */
            --brand: #0891b2;         /* Cyan 600 */
            --will-color: #06b6d4;    /* Cyan 500 */
            --will-bg: #ecfeff;       /* Cyan 50 */
            --will-border: #a5f3fc;   /* Cyan 200 */
            
            --wont-color: #f43f5e;    /* Rose 500 */
            --wont-bg: #fff1f2;       /* Rose 50 */
            --wont-border: #fecdd3;   /* Rose 200 */
            
            --robot-color: #6366f1;   /* Indigo */
            --success: #10b981;       /* Emerald */

            /* UI Effects */
            --shadow-card: 0 4px 6px -1px rgba(0, 0, 0, 0.05), 0 2px 4px -1px rgba(0, 0, 0, 0.03);
            --shadow-hover: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
            --radius-lg: 24px;
            
            /* Footer */
            --footer-bg: #111827;
            --footer-text: #9ca3af;
        }

        body.dark-mode {
            --bg-page: #0f172a;       /* Slate 950 */
            --bg-card: #1e293b;       /* Slate 800 */
            --bg-element: #334155;    /* Slate 700 */
            --text-primary: #f8fafc;  /* Slate 50 */
            --text-secondary: #cbd5e1;/* Slate 300 */
            --border-line: #475569;
            
            --brand: #22d3ee;         /* Cyan 400 */
            --will-color: #67e8f9;
            --will-bg: rgba(6, 182, 212, 0.15);
            --will-border: rgba(6, 182, 212, 0.3);
            
            --wont-color: #fb7185;
            --wont-bg: rgba(244, 63, 94, 0.15);
            --wont-border: rgba(244, 63, 94, 0.3);
            
            --footer-bg: #020617;
        }

        /* --- GLOBAL RESET --- */
        * { box-sizing: border-box; margin: 0; padding: 0; outline: none; -webkit-tap-highlight-color: transparent; }
        
        body { 
            font-family: 'Nunito Sans', sans-serif; 
            background: var(--bg-page); color: var(--text-primary); 
            line-height: 1.7; overflow-x: hidden; transition: 0.3s;
            display: flex; flex-direction: column; min-height: 100vh;
        }

        h1, h2, h3 { font-family: 'Lora', serif; font-weight: 700; line-height: 1.2; color: var(--text-primary); }
        .mono { font-family: 'JetBrains Mono', monospace; font-size: 0.9em; }

        /* --- ANIMATIONS --- */
        @keyframes slideUp { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes float { 0% { transform: translateY(0px); } 50% { transform: translateY(-6px); } 100% { transform: translateY(0px); } }

        /* --- HEADER --- */
        .top-bar {
            position: fixed; top: 0; left: 0; width: 100%; height: 72px; z-index: 1000;
            background: var(--bg-card); border-bottom: 1px solid var(--border-line);
            display: flex; align-items: center; justify-content: space-between; padding: 0 1.5rem;
            box-shadow: var(--shadow-card);
        }
        
        .brand-logo { display: flex; align-items: center; gap: 12px; font-weight: 800; font-size: 1.2rem; }
        .brand-logo img { width: 36px; height: 36px; border-radius: 8px; }
        .progress-track { flex: 1; max-width: 300px; height: 6px; background: var(--bg-element); border-radius: 10px; overflow: hidden; display: none; margin: 0 2rem; }
        @media(min-width: 768px) { .progress-track { display: block; } }
        .progress-fill { height: 100%; width: 0%; background: linear-gradient(90deg, var(--will-color), var(--brand)); transition: 0.5s; }
        .hamburger { font-size: 1.5rem; cursor: pointer; padding: 5px; }

        /* --- SIDEBAR --- */
        .sidebar {
            position: fixed; top: 72px; left: 0; width: 280px; height: calc(100vh - 72px);
            background: var(--bg-card); border-right: 1px solid var(--border-line);
            padding: 1.5rem; overflow-y: auto; z-index: 900;
            transform: translateX(-100%); transition: 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .sidebar.open { transform: translateX(0); }
        @media(min-width: 1024px) { .sidebar { transform: translateX(0); } .hamburger { display: none; } }

        .nav-label { font-size: 0.75rem; text-transform: uppercase; letter-spacing: 1.5px; color: var(--text-secondary); font-weight: 800; margin: 1.5rem 0 0.5rem 10px; }
        .nav-btn {
            display: flex; align-items: center; gap: 14px; padding: 12px 16px; width: 100%;
            border: none; background: transparent; color: var(--text-secondary); font-weight: 600;
            border-radius: 12px; cursor: pointer; transition: 0.2s; text-align: left; font-size: 0.95rem; margin-bottom: 5px;
        }
        .nav-btn:hover { background: var(--bg-element); color: var(--text-primary); }
        .nav-btn.active { background: var(--brand); color: #ffffff; box-shadow: var(--shadow-card); }

        /* --- CONTENT --- */
        .content-wrapper { margin-top: 72px; padding: 2rem; width: 100%; transition: margin-left 0.3s; }
        @media(min-width: 1024px) { .content-wrapper { margin-left: 280px; width: calc(100% - 280px); padding: 3rem 4rem; } }

        .lab-section { display: none; animation: slideUp 0.5s ease; max-width: 950px; margin: 0 auto; }
        .lab-section.active { display: block; }

        /* --- CARDS --- */
        .card {
            background: var(--bg-card); border: 1px solid var(--border-line); border-radius: var(--radius-lg);
            padding: 2.5rem; margin-bottom: 2rem; box-shadow: var(--shadow-card); position: relative;
        }
        
        .badge { display: inline-block; padding: 5px 12px; border-radius: 20px; font-size: 0.75rem; font-weight: 800; text-transform: uppercase; margin-bottom: 1rem; border: 1px solid; }
        .badge.will { background: var(--will-bg); color: var(--will-color); border-color: var(--will-border); }
        .badge.wont { background: var(--wont-bg); color: var(--wont-color); border-color: var(--wont-border); }

        /* --- ROBOT RULE VISUALS --- */
        .robot-grid { display: flex; gap: 20px; margin: 2rem 0; flex-wrap: wrap; }
        .robot-card {
            flex: 1; padding: 2rem; border-radius: 20px; text-align: center; min-width: 240px;
            background: var(--bg-element); border: 2px solid transparent; transition: 0.3s;
        }
        .robot-card:hover { transform: translateY(-5px); border-color: var(--will-color); background: var(--will-bg); }
        .robot-icon { font-size: 3rem; color: var(--will-color); margin-bottom: 1rem; display: block; animation: float 3s infinite ease-in-out; }

        /* --- FORMULA BUILDER --- */
        .formula-box {
            background: var(--bg-element); border-radius: 16px; padding: 1.5rem;
            display: flex; flex-wrap: wrap; gap: 10px; align-items: center; justify-content: center;
            margin: 1.5rem 0; font-family: 'JetBrains Mono';
        }
        .block {
            padding: 10px 18px; border-radius: 10px; font-weight: 700; font-size: 0.95rem;
            background: var(--bg-card); border: 1px solid var(--border-line);
        }
        .block.hl-will { background: var(--will-color); color: white; border-color: var(--will-color); }
        .block.hl-wont { background: var(--wont-color); color: white; border-color: var(--wont-color); }
        .block.base { border-style: dashed; }

        /* --- AUDIO & TABLES --- */
        .audio-btn {
            width: 40px; height: 40px; border-radius: 50%; border: 1px solid var(--border-line);
            background: var(--bg-card); color: var(--text-secondary); cursor: pointer;
            display: inline-flex; align-items: center; justify-content: center; transition: 0.2s;
        }
        .audio-btn:hover { background: var(--text-primary); color: var(--bg-card); transform: scale(1.1); }

        .data-table { width: 100%; border-collapse: collapse; min-width: 500px; margin-top: 1rem; }
        .table-wrap { overflow-x: auto; }
        .data-table th { text-align: left; padding: 15px; border-bottom: 2px solid var(--border-line); color: var(--text-secondary); font-size: 0.85rem; text-transform: uppercase; }
        .data-table td { padding: 15px; border-bottom: 1px solid var(--border-line); color: var(--text-primary); }

        /* --- USAGE GRID (4 Pillars) --- */
        .usage-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-top: 2rem; }
        .use-card { padding: 20px; border-radius: 16px; background: var(--bg-card); border: 1px solid var(--border-line); text-align: center; cursor: pointer; transition: 0.3s; }
        .use-card:hover { border-color: var(--will-color); box-shadow: var(--shadow-hover); }
        .use-card i { font-size: 2rem; color: var(--will-color); margin-bottom: 10px; }
        .use-card h4 { margin-bottom: 5px; color: var(--text-primary); }
        .use-card small { color: var(--text-secondary); line-height: 1.4; display: block; }

        /* --- PHONICS (Contractions) --- */
        .phonics-row { display: flex; flex-direction: column; gap: 15px; margin-top: 20px; }
        .phonics-item { 
            display: flex; align-items: center; justify-content: space-between; padding: 15px 20px;
            background: var(--bg-element); border-radius: 12px; cursor: pointer; transition: 0.2s;
        }
        .phonics-item:hover { background: var(--will-bg); border: 1px solid var(--will-border); }
        .phonics-text { font-size: 1.1rem; font-weight: 700; color: var(--text-primary); }
        .phonics-ipa { font-family: 'JetBrains Mono'; color: var(--text-secondary); font-size: 0.9rem; }

        /* --- WORKSHOP & DICTATION --- */
        .workshop-zone {
            background: var(--bg-element); border: 2px dashed var(--border-line); border-radius: 20px;
            padding: 20px; margin: 20px 0; min-height: 80px; display: flex; flex-wrap: wrap; gap: 10px; justify-content: center; align-items: center;
        }
        .chip {
            padding: 10px 20px; background: var(--bg-card); border: 1px solid var(--border-line);
            border-radius: 10px; color: var(--text-primary); font-weight: 700; cursor: pointer;
            box-shadow: var(--shadow-card); user-select: none; font-family: 'JetBrains Mono';
        }
        .chip:active { transform: scale(0.95); }

        .btn-xl {
            width: 100%; padding: 18px; border-radius: 16px; border: none; font-size: 1.1rem;
            font-weight: 700; cursor: pointer; transition: 0.3s; display: flex; align-items: center; justify-content: center; gap: 10px;
            background: var(--text-primary); color: var(--bg-page); margin-top: 2rem;
        }
        .btn-xl:hover { transform: translateY(-3px); box-shadow: var(--shadow-hover); }
        
        .input-dict {
            width: 100%; padding: 15px; border-radius: 12px; border: 2px solid var(--border-line);
            background: var(--bg-card); color: var(--text-primary); font-family: 'JetBrains Mono';
            font-size: 1.2rem; text-align: center; margin: 20px 0; outline: none;
        }
        .input-dict:focus { border-color: var(--brand); }

        .feedback { display: none; padding: 15px; border-radius: 12px; margin-top: 20px; font-weight: 600; text-align: center; }
        .feedback.success { background: #dcfce7; color: #166534; }
        .feedback.error { background: #fee2e2; color: #991b1b; }

        /* --- FOOTER RIBBON --- */
        .footer-ribbon {
            background: var(--footer-bg); color: var(--footer-text);
            padding: 4rem 2rem 2rem; margin-top: auto; border-top: 1px solid rgba(255,255,255,0.1);
        }
        .footer-grid {
            max-width: 1100px; margin: 0 auto; display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 3rem;
        }
        .footer-col h5 { color: #ffffff; font-size: 1.1rem; margin-bottom: 1.2rem; font-family: 'Lora'; }
        .footer-col p { font-size: 0.9rem; line-height: 1.8; opacity: 0.8; }
        .legal {
            max-width: 1100px; margin: 4rem auto 0; padding-top: 2rem; border-top: 1px solid rgba(255,255,255,0.1);
            text-align: center; font-size: 0.75rem; font-family: 'JetBrains Mono'; letter-spacing: 1px; opacity: 0.5;
        }

        /* --- MOBILE --- */
        @media (max-width: 900px) {
            .sidebar { transform: translateX(-100%); }
            .sidebar.open { transform: translateX(0); box-shadow: 10px 0 30px rgba(0,0,0,0.2); }
            .content-wrapper { margin-left: 0; width: 100%; padding: 90px 1.2rem 3rem; }
            .robot-grid, .usage-grid { flex-direction: column; }
            h1 { font-size: 2.2rem; }
        }
    </style>
</head>
<body onload="initSystem()">

<div class="top-bar">
    <div class="brand-logo">
        <div class="hamburger" onclick="toggleSidebar()"><i class="fas fa-bars"></i></div>
        <img src="https://drive.google.com/thumbnail?id=1bOFY9XiVAv-WRQnVHXSnL5FHVEoK3UAp&sz=w128" alt="Logo">
        <span>Future Architect</span>
    </div>
    <div class="progress-track"><div class="progress-fill" id="progressBar"></div></div>
</div>

<nav class="sidebar" id="sidebar">
    <div class="nav-group">
        <div class="nav-label">Theory Core</div>
        <button class="nav-btn active" onclick="nav('intro', this)"><i class="fas fa-rocket"></i> Intro & Logic</button>
        <button class="nav-btn" onclick="nav('structure', this)"><i class="fas fa-layer-group"></i> The Robot Rule</button>
        <button class="nav-btn" onclick="nav('usage', this)"><i class="fas fa-th-large"></i> The 4 Pillars</button>
    </div>
    <div class="nav-group">
        <div class="nav-label">Phonics & Mechanics</div>
        <button class="nav-btn" onclick="nav('contractions', this)"><i class="fas fa-compress-arrows-alt"></i> Contractions ('ll)</button>
        <button class="nav-btn" onclick="nav('negative', this)"><i class="fas fa-ban"></i> Won't vs Want</button>
        <button class="nav-btn" onclick="nav('questions', this)"><i class="fas fa-question-circle"></i> Questions</button>
    </div>
    <div class="nav-group">
        <div class="nav-label">Challenge</div>
        <button class="nav-btn" onclick="nav('workshop', this)"><i class="fas fa-hammer"></i> Structure Builder</button>
        <button class="nav-btn" onclick="nav('dictation', this)"><i class="fas fa-microphone-alt"></i> Dictation</button>
        <button class="nav-btn" onclick="nav('quiz', this)"><i class="fas fa-trophy"></i> Certification</button>
    </div>
    <button class="nav-btn" onclick="toggleTheme()" style="margin-top:2rem; justify-content:center; background:var(--bg-element);">
        <i class="fas fa-moon"></i> Switch Theme
    </button>
</nav>

<main class="content-wrapper">

    <section id="sec-intro" class="lab-section active">
        <div class="card">
            <span class="badge will">Unit 02</span>
            <h1>The Instant <span>Future</span></h1>
            <p>El "Will" no es para planes detallados (eso es 'Going to'). El "Will" es para el futuro que nace <b>en este instante</b>: decisiones rápidas, promesas y predicciones del destino.</p>
            
            <div class="robot-grid">
                <div class="robot-card" onclick="nav('structure')">
                    <i class="fas fa-robot robot-icon"></i>
                    <h3>The Robot Rule</h3>
                    <p>El auxiliar <b>Will</b> es como un robot eficiente. Trata a todos los sujetos igual. Nunca cambia.</p>
                    <small style="display:block; margin-top:10px; font-weight:700; color:var(--text-secondary);">I will, She will, They will</small>
                </div>
                
                <div class="robot-card" onclick="nav('usage')">
                    <i class="fas fa-bolt robot-icon" style="color:var(--brand);"></i>
                    <h3>Spontaneous</h3>
                    <p>No lo pensaste ayer. Lo decidiste ahora mismo. Es una reacción al presente.</p>
                    <small style="display:block; margin-top:10px; font-weight:700; color:var(--text-secondary);">"The phone is ringing. I'll get it."</small>
                </div>
            </div>

            <button class="btn-xl" onclick="nav('structure')">Entender la Estructura <i class="fas fa-arrow-right"></i></button>
        </div>
    </section>

    <section id="sec-structure" class="lab-section">
        <div class="card">
            <span class="badge will">Logic</span>
            <h2>The <span style="color:var(--will-color);">Robot</span> Rule</h2>
            <p>Olvídate de la "S" para tercera persona. Olvídate del "To". Olvídate del "-ing". <br>Después de <b>Will</b>, el verbo siempre va en su forma <b>BASE</b> más pura.</p>

            <div class="formula-box">
                <div class="block">Subject</div> <i class="fas fa-plus"></i>
                <div class="block hl-will">WILL</div> <i class="fas fa-plus"></i>
                <div class="block base">Base Verb</div>
            </div>

            <div class="table-wrap">
                <table class="data-table">
                    <tr><th>Listen</th><th>Sentence</th><th>Analysis</th></tr>
                    <tr>
                        <td><button class="audio-btn" onclick="speak('She will call you tomorrow')"><i class="fas fa-volume-up"></i></button></td>
                        <td class="mono">She <b>will</b> call you.</td>
                        <td>No 'calls'. Just 'call'.</td>
                    </tr>
                    <tr>
                        <td><button class="audio-btn" onclick="speak('We will be there soon')"><i class="fas fa-volume-up"></i></button></td>
                        <td class="mono">We <b>will</b> be there.</td>
                        <td>'Be' es la base de Am/Is/Are.</td>
                    </tr>
                    <tr>
                        <td><button class="audio-btn" onclick="speak('It will rain later')"><i class="fas fa-volume-up"></i></button></td>
                        <td class="mono">It <b>will</b> rain later.</td>
                        <td>Prediction.</td>
                    </tr>
                </table>
            </div>

            <button class="btn-xl" style="background:var(--brand);" onclick="nav('usage')">Ver los 4 Pilares de Uso <i class="fas fa-th-large"></i></button>
        </div>
    </section>

    <section id="sec-usage" class="lab-section">
        <div class="card">
            <h2>The 4 Pillars of <span style="color:var(--will-color);">Will</span></h2>
            <p>No uses Will para planes (como "Voy a viajar"). Úsalo solo para estos 4 casos específicos:</p>

            <div class="usage-grid">
                <div class="use-card" onclick="speak('I will open the door.')">
                    <i class="fas fa-bolt"></i>
                    <h4>Rapid Decision</h4>
                    <small>Decisión al instante.<br>"Hold on, I'll open the door."</small>
                </div>
                <div class="use-card" onclick="speak('I promise I will call you.')">
                    <i class="fas fa-hand-holding-heart"></i>
                    <h4>Promise</h4>
                    <small>Compromiso personal.<br>"I promise I won't tell anyone."</small>
                </div>
                <div class="use-card" onclick="speak('People will live on Mars.')">
                    <i class="fas fa-crystal-ball"></i>
                    <h4>Prediction</h4>
                    <small>Futuro basado en opinión/fe.<br>"People will live on Mars."</small>
                </div>
                <div class="use-card" onclick="speak('I will help you with that.')">
                    <i class="fas fa-gift"></i>
                    <h4>Offer</h4>
                    <small>Ofrecer ayuda voluntaria.<br>"That looks heavy. I'll help you."</small>
                </div>
            </div>
            
            <button class="btn-xl" onclick="nav('contractions')">Pero... ¿Cómo suena realmente? <i class="fas fa-headphones"></i></button>
        </div>
    </section>

    <section id="sec-contractions" class="lab-section">
        <div class="card">
            <h2>The <span style="color:var(--text-secondary);">'ll</span> Sound</h2>
            <p>Los nativos rara vez dicen "I will". Casi siempre usan la contracción <b>'ll</b>. Es un sonido de "L" oscura en la garganta.</p>

            <div class="phonics-row">
                <div class="phonics-item" onclick="speak('I will. I\'ll. I\'ll see you later.')">
                    <div>
                        <div class="phonics-text">I will &rarr; I'll</div>
                        <div class="phonics-ipa">/aɪl/ (Suena como "Ail")</div>
                    </div>
                    <i class="fas fa-volume-up" style="color:var(--will-color);"></i>
                </div>
                
                <div class="phonics-item" onclick="speak('You will. You\'ll. You\'ll love it.')">
                    <div>
                        <div class="phonics-text">You will &rarr; You'll</div>
                        <div class="phonics-ipa">/juːl/ (Suena como "Yul")</div>
                    </div>
                    <i class="fas fa-volume-up" style="color:var(--will-color);"></i>
                </div>

                <div class="phonics-item" onclick="speak('It will. It\'ll. It\'ll be fine.')">
                    <div>
                        <div class="phonics-text">It will &rarr; It'll</div>
                        <div class="phonics-ipa">/ˈɪtəl/ (Suena como "Í-tol")</div>
                    </div>
                    <i class="fas fa-volume-up" style="color:var(--will-color);"></i>
                </div>
            </div>

            <button class="btn-xl" style="background:var(--wont-color);" onclick="nav('negative')">Alerta: The Negative Trap <i class="fas fa-ban"></i></button>
        </div>
    </section>

    <section id="sec-negative" class="lab-section">
        <div class="card" style="border-top:5px solid var(--wont-color);">
            <h1 style="color:var(--wont-color);">Won't vs. Want</h1>
            <p>La negación de Will es <b>Won't</b>. Su pronunciación es el dolor de cabeza de todos porque se confunde con "Want" (Querer).</p>
            
            <div style="display:flex; gap:20px; margin:2rem 0; flex-wrap:wrap;">
                <div class="robot-card" style="border-color:var(--wont-color); background:var(--wont-bg);" onclick="speak('I won\'t go.')">
                    <h2 style="font-size:2.5rem; color:var(--wont-color);">Won't</h2>
                    <p>No lo haré.</p>
                    <div style="font-family:'JetBrains Mono'; font-weight:800;">/woʊnt/</div>
                    <small>Sonido largo "OU" (como en 'Go').<br>Labios muy redondos.</small>
                </div>
                
                <div class="robot-card" onclick="speak('I want to go.')">
                    <h2 style="font-size:2.5rem;">Want</h2>
                    <p>Querer.</p>
                    <div style="font-family:'JetBrains Mono'; font-weight:800;">/wɑːnt/</div>
                    <small>Sonido abierto "A".<br>Boca relajada.</small>
                </div>
            </div>

            <h3>Negative Formula</h3>
            <div class="formula-box">
                <div class="block">Subject</div> <i class="fas fa-plus"></i>
                <div class="block hl-wont">WON'T</div> <i class="fas fa-plus"></i>
                <div class="block base">Base Verb</div>
            </div>
            <p class="mono" style="text-align:center;">I <b style="color:var(--wont-color);">won't</b> do it again.</p>

            <button class="btn-xl" style="background:var(--text-main);" onclick="nav('questions')">Ver Estructura de Preguntas</button>
        </div>
    </section>

    <section id="sec-questions" class="lab-section">
        <div class="card">
            <h2>Questions</h2>
            <p>El robot <b>Will</b> se mueve al principio. Es lo único que cambia.</p>

            <div class="formula-box" style="border:2px solid var(--will-color);">
                <div class="block hl-will">WILL</div> <i class="fas fa-plus"></i>
                <div class="block">Subject</div> <i class="fas fa-plus"></i>
                <div class="block base">Base Verb</div> <div class="block">?</div>
            </div>

            <div class="table-wrap">
                <table class="data-table">
                    <tr><th>Audio</th><th>Question</th><th>Answer</th></tr>
                    <tr>
                        <td><button class="audio-btn" onclick="speak('Will you marry me?')"><i class="fas fa-volume-up"></i></button></td>
                        <td class="mono"><b>Will</b> you marry me?</td>
                        <td>Yes, I will. / No, I won't.</td>
                    </tr>
                    <tr>
                        <td><button class="audio-btn" onclick="speak('When will they arrive?')"><i class="fas fa-volume-up"></i></button></td>
                        <td class="mono">When <b>will</b> they arrive?</td>
                        <td>In 10 minutes.</td>
                    </tr>
                </table>
            </div>

            <button class="btn-xl" onclick="nav('workshop')">¡A practicar! Workshop <i class="fas fa-hammer"></i></button>
        </div>
    </section>

    <section id="sec-workshop" class="lab-section">
        <div class="card">
            <h2>Structure Builder</h2>
            <p>Construye la oración. Cuidado con el orden del auxiliar.</p>
            
            <div class="workshop-stage">
                <h3 id="targetSentence" style="color:var(--text-secondary); margin-bottom:20px;">Cargando...</h3>
                
                <div class="workshop-zone" id="dropArea"></div>
                <div class="chip-bank" id="chipBank"></div>
                
                <div class="feedback" id="wsFeedback"></div>
            </div>

            <button class="btn-xl" onclick="checkWorkshop()">Verificar</button>
            <button class="btn-xl btn-secondary" onclick="resetWorkshop()">Reiniciar</button>
        </div>
    </section>

    <section id="sec-dictation" class="lab-section">
        <div class="card">
            <h2>Dictation <span style="color:var(--will-color);">Training</span></h2>
            <p>Escucha atentamente. ¿Dijo "I will" o "I'll"? ¿Dijo "Won't" o "Want"?</p>
            
            <div style="background:var(--bg-element); padding:3rem 2rem; border-radius:24px; text-align:center; margin-top:2rem;">
                <button class="audio-btn" style="width:70px; height:70px; font-size:1.8rem; margin-bottom:2rem; background:var(--brand); color:#ffffff; border:none;" onclick="playDictation()"><i class="fas fa-play"></i></button>
                <p style="font-size:0.9rem; color:var(--text-secondary);">Escucha y escribe la oración completa.</p>
                
                <input type="text" class="input-dict" id="dictInput" placeholder="Escribe aquí..." autocomplete="off">
            </div>
            
            <div class="feedback" id="dictFeedback"></div>
            <button class="btn-xl" onclick="checkDictation()">Comprobar Oído</button>
        </div>
    </section>

    <section id="sec-quiz" class="lab-section">
        <div class="card">
            <h2>Final Certification</h2>
            <p>10 preguntas para demostrar que controlas el futuro.</p>
            
            <div id="quiz-ui">
                <div style="margin:20px 0; height:6px; background:var(--bg-element); border-radius:10px;"><div id="quizProgress" style="height:100%; width:0%; background:var(--brand); transition:0.3s;"></div></div>
                <div id="questionBox" style="font-size:1.4rem; font-weight:700; margin-bottom:2rem; text-align:center; color:var(--text-primary);"></div>
                <div id="optionsBox"></div>
            </div>

            <div id="quiz-results" style="display:none; text-align:center; padding:2rem;">
                <img src="https://drive.google.com/thumbnail?id=1bOFY9XiVAv-WRQnVHXSnL5FHVEoK3UAp&sz=w256" style="width:120px; border-radius:15px; box-shadow:var(--shadow-hover); margin-bottom:20px;">
                <h2 style="color:var(--success);">Future Architect Certified!</h2>
                <p id="finalScore" style="font-size:1.5rem; font-weight:800; color:var(--text-primary); margin:1rem 0;"></p>
                <button class="btn-xl" onclick="location.reload()">Reiniciar Sistema</button>
            </div>
        </div>
    </section>

</main>

<footer class="footer-ribbon">
    <div class="footer-grid">
        <div class="footer-col">
            <h5>Rators Club</h5>
            <p>Plataforma de ingeniería lingüística avanzada.</p>
        </div>
        <div class="footer-col">
            <h5>Creator</h5>
            <p><b>Teacher Netza Varo</b><br>Tepic, Nayarit.<br>Est. 2026</p>
        </div>
        <div class="footer-col">
            <h5>Status</h5>
            <p>Titan v2.0<br>Module: Future Simple</p>
        </div>
    </div>
    <div class="legal">
        RATORS CLUB LABS | LICENSED UNDER GNU GPL V3.0 | BUILT WITH <i class="fas fa-bolt" style="color:var(--brand);"></i>
    </div>
</footer>

<script>
    /* ========================================
       TITAN ENGINE: FUTURE LOGIC
       ======================================== */
    
    // --- ROBUST AUDIO (Force English Voice) ---
    const synth = window.speechSynthesis;
    let availableVoices = [];
    let preferredVoice = null;

    function initVoices() {
        availableVoices = synth.getVoices();
        // Priority: Google US -> Apple Samantha -> Any English
        preferredVoice = availableVoices.find(v => v.name.includes("Google US")) 
                      || availableVoices.find(v => v.lang === "en-US") 
                      || availableVoices.find(v => v.lang.startsWith("en"));
    }

    if (speechSynthesis.onvoiceschanged !== undefined) {
        speechSynthesis.onvoiceschanged = initVoices;
    }

    function speak(text) {
        if (synth.speaking) synth.cancel();
        if (availableVoices.length === 0) initVoices();

        const utter = new SpeechSynthesisUtterance(text);
        if (preferredVoice) utter.voice = preferredVoice;
        
        utter.lang = 'en-US';
        utter.rate = 0.9;
        synth.speak(utter);
    }

    function unlockAudio() {
        if (synth.paused) synth.resume();
        initVoices();
    }

    function initSystem() {
        initVoices();
        if(localStorage.getItem('rators-theme') === 'dark') {
            document.body.classList.add('dark-mode');
        }
    }

    // --- INTERFACE ---
    function toggleSidebar() { document.getElementById('sidebar').classList.toggle('open'); }
    function toggleTheme() {
        document.body.classList.toggle('dark-mode');
        localStorage.setItem('rators-theme', document.body.classList.contains('dark-mode') ? 'dark' : 'light');
    }

    function nav(id, btn) {
        document.querySelectorAll('.lab-section').forEach(s => s.classList.remove('active'));
        document.getElementById('sec-' + id).classList.add('active');
        
        if(btn) {
            document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            if(window.innerWidth <= 900) toggleSidebar();
        }
        
        window.scrollTo(0,0);

        // Progress
        const sections = ['intro', 'structure', 'usage', 'contractions', 'negative', 'questions', 'workshop', 'dictation', 'quiz'];
        const idx = sections.indexOf(id);
        const pct = ((idx + 1) / sections.length) * 100;
        document.getElementById('progressBar').style.width = `${pct}%`;

        // Init modules
        if(id === 'workshop') initWorkshop();
        if(id === 'dictation') initDictation();
        if(id === 'quiz') initQuiz();
    }

    // --- WORKSHOP LOGIC ---
    const wsData = [
        { es: "Yo te llamaré.", words: ["I", "will", "call", "you", "."], correct: "I will call you ." },
        { es: "Ella no vendrá.", words: ["She", "won't", "come", "."], correct: "She won't come ." },
        { es: "Lloverá mañana.", words: ["It", "will", "rain", "tomorrow", "."], correct: "It will rain tomorrow ." },
        { es: "¿Me ayudarás?", words: ["Will", "you", "help", "me", "?"], correct: "Will you help me ?" },
        { es: "No le diré a nadie.", words: ["I", "won't", "tell", "anyone", "."], correct: "I won't tell anyone ." },
        { es: "Creo que ganarán.", words: ["I", "think", "they", "will", "win", "."], correct: "I think they will win ." },
        { es: "¿Dónde vivirás?", words: ["Where", "will", "you", "live", "?"], correct: "Where will you live ?" }
    ];
    let wsIdx = 0;

    function initWorkshop() {
        const data = wsData[wsIdx];
        document.getElementById('targetSentence').innerText = data.es;
        const bank = document.getElementById('chipBank');
        const drop = document.getElementById('dropArea');
        const fb = document.getElementById('wsFeedback');
        
        bank.innerHTML = ''; drop.innerHTML = ''; fb.style.display = 'none';

        // Shuffle
        let chips = [...data.words].sort(() => Math.random() - 0.5);

        chips.forEach(word => {
            const chip = document.createElement('div');
            chip.className = 'chip';
            chip.innerText = word;
            chip.onclick = () => {
                if(chip.parentElement === bank) {
                    drop.appendChild(chip);
                    speak(word);
                } else {
                    bank.appendChild(chip);
                }
            };
            bank.appendChild(chip);
        });
    }

    function checkWorkshop() {
        const attempt = Array.from(document.getElementById('dropArea').children).map(c => c.innerText).join(' ');
        const correct = wsData[wsIdx].correct;
        const fb = document.getElementById('wsFeedback');
        
        fb.style.display = 'block';
        if(attempt === correct) {
            fb.className = 'feedback success';
            fb.innerHTML = '<i class="fas fa-check-circle"></i> Correct! Future secured.';
            confetti({ particleCount: 50, spread: 60, origin: { y: 0.6 } });
            speak("Correct!");
            setTimeout(() => {
                wsIdx = (wsIdx + 1) % wsData.length;
                initWorkshop();
            }, 2000);
        } else {
            fb.className = 'feedback error';
            fb.innerHTML = '<i class="fas fa-times-circle"></i> Incorrect structure.';
            speak("Try again");
        }
    }
    
    function resetWorkshop() { initWorkshop(); }

    // --- DICTATION LOGIC ---
    const dictSentences = [
        "I'll help you with that",
        "It won't happen again",
        "Will you marry me",
        "She'll be here soon",
        "I think it will rain",
        "He won't eat vegetables",
        "We'll see you tomorrow"
    ];
    let dicIdx = 0;

    function initDictation() {
        document.getElementById('dictInput').value = '';
        document.getElementById('dictFeedback').style.display = 'none';
    }

    function playDictation() { speak(dictSentences[dicIdx]); }

    function checkDictation() {
        const val = document.getElementById('dictInput').value.trim();
        const target = dictSentences[dicIdx];
        const fb = document.getElementById('dictFeedback');
        
        fb.style.display = 'block';
        
        const cleanVal = val.replace(/[.,?']/g, '').toLowerCase().trim();
        const cleanTarget = target.replace(/[.,?']/g, '').toLowerCase().trim();

        if(cleanVal === cleanTarget) {
            fb.className = 'feedback success';
            fb.innerHTML = `<b>Perfect!</b> "${target}"`;
            confetti({ particleCount: 50, spread: 50 });
            setTimeout(() => {
                dicIdx = (dicIdx + 1) % dictSentences.length;
                initDictation();
            }, 2500);
        } else {
            fb.className = 'feedback error';
            fb.innerHTML = `Keep trying. Listen for contractions.`;
        }
    }

    // --- QUIZ LOGIC ---
    const quizQ = [
        { q: "She ____ (help) us tomorrow.", opts: ["will help", "wills help", "will helps"], a: "will help" },
        { q: "I ____ (not/tell) anyone. I promise.", opts: ["don't tell", "won't tell", "won't tells"], a: "won't tell" },
        { q: "____ (you/go) to the party?", opts: ["Will you go", "Do you go", "Will you going"], a: "Will you go" },
        { q: "It ____ (be) a great day.", opts: ["will be", "will is", "will to be"], a: "will be" },
        { q: "Wait! I ____ (open) the door for you.", opts: ["will open", "open", "going to open"], a: "will open" },
        { q: "They ____ (not/come). They are sick.", opts: ["won't come", "not come", "willn't come"], a: "won't come" },
        { q: "I think he ____ (win) the race.", opts: ["will win", "wills win", "winning"], a: "will win" },
        { q: "What ____ (happen) next?", opts: ["will happen", "happen will", "will happens"], a: "will happen" },
        { q: "We ____ (see) you later.", opts: ["will see", "see", "will seeing"], a: "will see" },
        { q: "Where ____ (we/meet)?", opts: ["will we meet", "we will meet", "will meet we"], a: "will we meet" }
    ];
    let qIdx = 0;
    let score = 0;

    function initQuiz() {
        qIdx = 0; score = 0;
        document.getElementById('quiz-ui').style.display = 'block';
        document.getElementById('quiz-results').style.display = 'none';
        renderQuestion();
    }

    function renderQuestion() {
        if(qIdx >= quizQ.length) return finishQuiz();
        
        const data = quizQ[qIdx];
        document.getElementById('questionBox').innerText = `${qIdx+1}. ${data.q}`;
        const box = document.getElementById('optionsBox');
        box.innerHTML = '';
        
        data.opts.forEach(opt => {
            const btn = document.createElement('button');
            btn.className = 'btn-xl';
            btn.style.marginTop = '10px';
            btn.style.background = 'var(--bg-element)';
            btn.style.color = 'var(--text-primary)';
            btn.style.border = '1px solid var(--border-line)';
            btn.innerText = opt;
            btn.onclick = () => handleAnswer(opt, data.a);
            box.appendChild(btn);
        });
        
        document.getElementById('quizProgress').style.width = `${(qIdx / quizQ.length) * 100}%`;
    }

    function handleAnswer(selected, correct) {
        if(selected === correct) score++;
        qIdx++;
        renderQuestion();
    }

    function finishQuiz() {
        document.getElementById('quiz-ui').style.display = 'none';
        document.getElementById('quiz-results').style.display = 'block';
        document.getElementById('finalScore').innerText = `Score: ${score} / 10`;
        if(score >= 8) confetti();
    }
</script>

</body>
</html>
